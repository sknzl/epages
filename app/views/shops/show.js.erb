console.log("hello from show.js.erb")
console.log("<%= @product_id %>")
var modal = document.getElementById('<%= @product_id %>');
var button = modal.getElementsByClassName('modal-button')[0];
var details = modal.getElementsByClassName('modal-details')[0];

Array.from(modal.getElementsByClassName('close-button')).forEach(function (element, index){
  element.addEventListener("click", resetModal);
});

function resetModal() {
    button.innerHTML = "Show details";
    details.innerHTML = "";;
}

if (button.innerHTML === "Show details") {
    button.innerHTML = "Hide details";
    <% if  @shop_api.sales(product_id: @product_id).sales_per_currency.any? %>
      details.innerHTML = 'Total order: <%= @shop_api.sales(product_id: @product_id).sales_per_currency.first.total_orders%> \
                        <p> Customers who bought this product:\ </p> \
                        <ul> \
                        <%find_buyers(@product_id, @orders_details).each do |buyer| %> \
                          <li>\
                            <%= buyer %>\
                          </li>\
                        <%end %>\
                        </ul>';
    <%else%>
      details.innerHTML = 'No sales of this product'
    <%end%>
} else if (button.innerHTML === "Hide details") {
    button.innerHTML = "Show details";
    details.innerHTML = "";
}



